<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>用户主页</title>
<#include "/_inc/head.html">
<style type="text/css">
<!--
#questionList TH { text-align: left; font-weight: bold; border-bottom: 1px solid #e0eeef; }
#questionList TD { text-align: left; border-width: 0 !important; font-weight: normal !important; cursor: pointer; }
-->
</style>
<script type="text/javascript">
<!--
$(function() {
	$("#questionList td").hover(function() {
		$(this).parent().children().toggleClass("ui-state-hover");
	});
	$("#messageBox td").click(function() {
		// TODO
	});
	$("#questionList td").click(function() {
		var id = $(this).parent().attr("id");
		if (id) location.href = "questionDetail.html?id=" + id;
	});
	var answerers = ${answererJson};
	$("#student, #subject").change(function() {
		var key = $("#student option:selected").val() + "." + $("#subject option:selected").val();
		if (answerers[key]) {
			$("#answerer").next().text(answerers[key]);
			$("#answerer").show();
		} else {
			$("#answerer").hide();
		}
	});
	$("#student").change();
});
//-->
</script>
</head>
<body>
<table id="box" border="0" cellspacing="5" cellpadding="0" class="ui-widget-content">
<#include "/_inc/bar.html">
<tbody>
	<tr>
		<td height="100%" align="left" valign="top">
			<!-- REPLACE HERE　WITH　ASSISTANT -->
			<div class="box-assist ui-widget-content ui-corner-all">
				<div class="box-title ui-state-default ui-corner-top">&nbsp;</div>
				<div class="box-subtitle ui-widget-content">
					<div class="ui-icon ui-icon-person float-left"></div>基本资料
				</div>
				<div class="box-content ui-widget-content">
					<table border="0" cellspacing="2" cellpadding="0">
					<tbody>
						<tr>
							<td rowspan="4" align="left" valign="top"><@face user=tutor.loginUser width=75 /></td>
							<td><div class="ellipsis" style="width:80px">${tutor.loginUser.email}</div></td>
						</tr>
						<tr>
							<td><div class="ellipsis" style="width:80px">${tutor.loginUser.name}</div></td>
						</tr>
						<tr>
							<td><div class="ellipsis" style="width:80px">${tutor.loginUser.location}</div></td>
						</tr>
						<tr>
							<td>
								<a href="${pathrel}/front/modifyMember.html" class="fresh">修改</a>
								<a href="${pathrel}/public/resetpw.html" class="danger">更换密码</a>
							</td>
						</tr>
					</tbody>
					</table>
				</div>
				<#--
				<#if tutor.loginUser.role=="Parent">
				<div class="box-subtitle ui-widget-content">
					<div class="ui-icon ui-icon-bookmark float-left"></div>提问分类
				</div>
				<div class="box-content ui-widget-content">
					<a href="#" onclick="addq('sort','new','search','s');return false;">未解答提问</a><br />
					<a href="#" onclick="addq('sort','old','search','s');return false;">已解答提问</a><br />
				</div>
				</#if>
				<div class="box-subtitle ui-widget-content">
					<div class="ui-icon ui-icon-contact float-left"></div>联系人
				</div>
				<div class="box-content ui-widget-content">
				</div>
				-->
			</div>
		</td>
		<td align="left" valign="top">
			<!-- REPLACE HERE WITH CONTENT -->
			<div class="box-body ui-widget-content ui-corner-all">
				<div class="box-title navbar ui-state-default ui-corner-top">
					<a href="${pathrel}/home.html" class="float-left"><span class="ui-icon ui-icon-home"></span></a>
					<div class="ui-icon ui-icon-carat-1-e float-left"></div>
					<a href="#" class="nav-link float-left">用户主页</a>
				</div>
				<#--
				<div class="box-subtitle ui-widget-content">
					<div class="ui-icon ui-icon-mail-closed float-left"></div>最新消息
					<a href="${pathrel}/back/messageBox.html" title="查看更多" class="float-right">
						<span class="ui-icon ui-icon-extlink"></span>
					</a>
				</div>
				<div class="box-content ui-widget-content">
					<table id="messageBox" width="100%" border="0" cellspacing="0" cellpadding="3">
					<tbody>
						<tr>
							<th align="left" width="80">发送时间</th>
							<th align="left" width="60">发送者</th>
							<th align="left">标题</th>
						</tr>
						<tr>
							<td class="odd">01/07 17:29</td>
							<td class="odd">张XX</td>
							<td class="odd">咨询？？</td>
						</tr>
						<tr>
							<td class="even">01/07 17:29</td>
							<td class="even">张XX</td>
							<td class="even">咨询？？</td>
						</tr>
					</tbody>
					</table>
				</div>
				-->
				<div class="box-subtitle ui-widget-content">新提问</div>
				<div class="box-content ui-widget-content">
				<form method="post" enctype="multipart/form-data">
					<table border="0" cellspacing="1" cellpadding="5">
					<tbody>
						<tr>
							<th align="center" class="ui-widget-header noborder">学生</th>
							<td align="left">
								<select name="student" id="student">
								<#list students as student>
									<@option value=Tutor.id(student) select=params.student>${student.name}</@option>
								</#list>
								</select>
								<@errmsg name="student" />
							</td>
							<td align="left" class="alpha25">请选择一个学生。</td>
						</tr>
						<tr>
							<th align="center" class="ui-widget-header noborder">学科</th>
							<td align="left">
								<select name="subject" id="subject">
								<#list subjects?keys as subject>
									<@option value=subject select=params.subject>${subjects[subject]}</@option>
								</#list>
								</select>
								<@errmsg name="subject" />
							</td>
							<td align="left" class="alpha25">请选择学科。</td>
						</tr>
						<tr>
							<th align="center" class="ui-widget-header noborder">指定解答</th>
							<td align="left">
								<@checkbox id="answerer" name="answerer" value="true" select=params.answerer!"true"><span></span></@checkbox>
								<@errmsg name="answerer" />
							</td>
							<td align="left" class="alpha25">请选择指定解答人。</td>
						</tr>
						<tr>
							<th align="center" class="ui-widget-header noborder">标题</th>
							<td align="left">
								<textarea name="title" rows="5" cols="20">${params.title!}</textarea>
								<@errmsg name="title" />
							</td>
							<td align="left" class="alpha25">请不要超过200个字。</td>
						</tr>
						<tr>
							<th align="center" class="ui-widget-header noborder">上传图片</th>
							<td align="left">
								<input type="file" name="file" /><br />
								<input type="file" name="file" /><br />
								<input type="file" name="file" /><br />
								<input type="file" name="file" /><br />
								<@errmsg name="file" />
							</td>
							<td align="left" class="alpha25">图片大小在500KB以内。</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<th>&nbsp;</th>
							<td align="left">
								<br />
								<input type="submit" name="newq" value="提问" class="green-button small-button ui-corner-all" />
							</td>
							<td>&nbsp;</td>
						</tr>
					</tfoot>
					</table>
				</form>
				</div>
				<div class="box-subtitle ui-widget-content">
					<div class="ui-icon ui-icon-help float-left"></div>我的提问
					<a href="${pathrel}/back/questionList.html?sort=new&amp;range=month&amp;search=s" title="查看更多" class="float-right">
						<span class="ui-icon ui-icon-extlink"></span>
					</a>
				</div>
				<div class="box-content ui-widget-content">
					<table id="questionList" width="100%" border="0" cellspacing="0" cellpadding="3">
					<thead>
						<tr>
							<th>&nbsp;</th>
							<th>提问时间</th>
							<th>姓名</th>
							<th>学科</th>
							<th>标题</th>
							<th>指定解答</th>
							<th>最终解答</th>
							<th>过期时间</th>
						</tr>
					</thead>
					<tbody>
					<#list questions as q>
						<#assign style=(q_index%2==0)?string('odd', 'even')>
						<tr id="${Tutor.id(q)}">
							<td class="${style}"><#if q.closed><div class="ui-icon ui-icon-check"></div></#if></td>
							<td class="${style}">${q.createDateTime?datetime}</td>
							<td class="${style}">${(q.student.name)!}</td>
							<td class="${style}">${q.grade?substring(0,1)!}${Tutor.numberWord(q.gradeLevel)!} ${q.subject!}</td>
							<td class="${style}">${q.title!}</td>
							<td class="${style}">${(q.assignTo.fullName)!}</td>
							<td class="${style}">${(q.finalAnswerer.fullName)!}</td>
							<td class="${style}">${q.expirationDate?date}</td>
						</tr>
					</#list>
					</tbody>
					</table>
				</div>
			</div>
		</td>
	</tr>
</tbody>
<#include "/_inc/foot.html">
</table>
</body>
</html>